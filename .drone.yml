---
kind: pipeline
type: docker
name: default-build

steps:
  - name: check
    image: publicawesome/networks-check
    environment:
      GITHUB_TOKEN:
        from_secret: github_token
  - name: collect
    image: publicawesome/stargaze:beta
    commands:
      - sh ./ci/check-gentx.sh
  - name: runner
    image: publicawesome/stargaze:beta
    detach: true
    commands:
      - apk add jq
      - sh ./ci/run.sh
  - name: check_runner
    image: alpine:3
    commands:
      - apk add curl
      - apk add jq
      - sh ./ci/check-running-node.sh
  - name: failure
    image: publicawesome/networks-check
    settings:
      failure: true
    when:
      status: [failure]
trigger:
  event:
    - pull_request

---
kind: signature
hmac: d4604dba9adb0a03d462056b4205aca7822d8ac82fa3524512a61a212a9fcdfd

...
